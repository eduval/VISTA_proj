<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>VISTA</title>
    <meta name="description" content="Faith Media Volunteer Management System">


    <meta name="viewport" content="width=device-width, maximum-scale=5, initial-scale=1">

    <!-- up to 10% speed up for external res -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com/">
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/">
    <!-- preloading icon font is helping to speed up a little bit -->
    <link rel="preload" href="assets/fonts/flaticon/Flaticon.woff2" as="font" type="font/woff2" crossorigin>

    <link rel="stylesheet" href="assets/css/core.min.css">
    <link rel="stylesheet" href="assets/css/vendor_bundle.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap">

    <!-- favicon -->
    <link rel="shortcut icon" href="favicon.png">
</head>

<body class="layout-admin aside-sticky bg-lime header-sticky"
    data-s2t-class="btn-primary btn-sm bg-gradient-default rounded-circle border-0">

    <div id="wrapper" class="d-flex align-items-stretch flex-column">

        <!--  header -->
        <header id="header" class="d-flex align-items-center shadow-xs">

            <!-- Navbar -->
            <div class="container-fluid position-relative">

                <nav class="navbar navbar-expand-lg navbar-light justify-content-between">

                    <!-- logo, navigation toggler -->
                    <div class="align-items-start">

                        <!-- sidebar toggler -->
                        <a href="#aside-main"
                            class="btn-sidebar-toggle h-100 d-inline-block d-lg-none justify-content-center align-items-center p-2">
                            <span>
                                <svg width="25" height="25" viewBox="0 0 20 20">
                                    <path
                                        d="M 19.9876 1.998 L -0.0108 1.998 L -0.0108 -0.0019 L 19.9876 -0.0019 L 19.9876 1.998 Z">
                                    </path>
                                    <path
                                        d="M 19.9876 7.9979 L -0.0108 7.9979 L -0.0108 5.9979 L 19.9876 5.9979 L 19.9876 7.9979 Z">
                                    </path>
                                    <path
                                        d="M 19.9876 13.9977 L -0.0108 13.9977 L -0.0108 11.9978 L 19.9876 11.9978 L 19.9876 13.9977 Z">
                                    </path>
                                    <path
                                        d="M 19.9876 19.9976 L -0.0108 19.9976 L -0.0108 17.9976 L 19.9876 17.9976 L 19.9876 19.9976 Z">
                                    </path>
                                </svg>
                            </span>
                        </a>

                        <!-- logo : mobile only -->
                        <a class="navbar-brand d-inline-block d-lg-none mx-2" href="admindashboard.html">
                            <img src="favicon.png" width="38" height="38" alt="VISTA">
                        </a>

                    </div>

                    <!-- navbar : navigation -->
                    <div class="collapse navbar-collapse" id="navbarMainNav">

                        <h1 class="h4 mb-0 text-dark px-4" style="font-weight: normal;">
                            My Services
                            <span class="d-block text-muted smaller">
                                Manage and monitor volunteer services
                            </span>
                        </h1>


                        <!-- navbar : mobile menu -->
                        <div class="navbar-xs d-none">

                            <!-- close button -->
                            <button class="navbar-toggler pt-0" type="button" data-bs-toggle="collapse"
                                data-bs-target="#navbarMainNav" aria-controls="navbarMainNav" aria-expanded="false"
                                aria-label="Toggle navigation">
                                <svg width="20" viewBox="0 0 20 20">
                                    <path
                                        d="M 20.7895 0.977 L 19.3752 -0.4364 L 10.081 8.8522 L 0.7869 -0.4364 L -0.6274 0.977 L 8.6668 10.2656 L -0.6274 19.5542 L 0.7869 20.9676 L 10.081 11.679 L 19.3752 20.9676 L 20.7895 19.5542 L 11.4953 10.2656 L 20.7895 0.977 Z">
                                    </path>
                                </svg>
                            </button>

                            <!-- logo -->
                            <a class="navbar-brand" href="admindashboard.html">
                                <img src="vista.png" width="110" height="38" alt="VISTA">
                            </a>

                        </div>
                        <!-- /navbar : mobile menu -->


                        <!-- Dropdowns -->


                    </div>
                    <!-- /navbar : navigation -->

                    <!-- options -->
                    <ul class="list-inline list-unstyled mb-0 d-flex align-items-end">

                        <!-- account -->
                        <li class="list-inline-item mx-1 dropdown">

                            <!-- has avatar -->
                            <a href="#" id="dropdownAccountOptions"
                                class="btn btn-sm btn-icon btn-light dropdown-toggle rounded-circle shadow bg-cover"
                                style="" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false"
                                aria-haspopup="true" aria-label="Account options"></a>

                            <!-- no avatar -->
                            <!--
                <a href="#" id="dropdownAccountOptions" class="btn btn-sm btn-icon btn-light dropdown-toggle rounded-circle" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">
                  <span class="small fw-bold">JD</span>
                </a>
                -->

                            <div aria-labelledby="dropdownAccountOptions"
                                class="dropdown-menu dropdown-menu-clean dropdown-menu-navbar-autopos dropdown-menu-invert dropdown-fadeindown p-0 mt-2 w-300">

                                <!-- user detail -->
                                <div
                                    class="dropdown-header bg-primary bg-gradient rounded rounded-bottom-0 text-white small p-4">
                                    <span class="d-block fw-medium text-truncate">John Doe</span>
                                    <span class="d-block smaller fw-medium text-truncate">john.doe@gmail.com</span>
                                    <span class="d-block smaller"><b>Last Login:</b> 2019-09-03 01:48</span>
                                </div>

                                <div class="dropdown-divider mb-3"></div>

                                <a href="#" class="dropdown-item text-truncate">
                                    <span class="fw-medium">My profile</span>
                                    <small class="d-block text-muted smaller">account settings and more</small>
                                </a>

                                <a href="#" class="dropdown-item text-truncate">
                                    <small class="badge bg-success-soft float-end">1 new</small>
                                    <span class="fw-medium">My Messages</span>
                                    <small class="d-block text-muted smaller">inbox, projects, tasts</small>
                                </a>

                                <a href="#" class="dropdown-item text-truncate">
                                    <small class="badge bg-danger-soft float-end">1 unpaid</small>
                                    <span class="fw-medium">My billing</span>
                                    <small class="d-block text-muted smaller">your monthly billing</small>
                                </a>

                                <a href="#" class="dropdown-item text-truncate">
                                    <span class="fw-medium">Account Settings</span>
                                    <small class="d-block text-muted smaller">profile, password and more...</small>
                                </a>



                                <div class="dropdown-divider mb-0 mt-3"></div>

                                <a href="#" id="logout-btn"
                                    class="prefix-icon-ignore dropdown-footer dropdown-custom-ignore fw-medium py-3 px-4">
                                    <i class="fi fi-power float-start"></i>
                                    Log Out
                                </a>
                            </div>

                        </li>



                    </ul>
                    <!-- /options -->

                </nav>

            </div>
            <!-- /Navbar -->

        </header>
        <!-- /Header -->


        <!-- content -->
        <div id="wrapper_content" class="d-flex flex-fill">


            <!-- sidebar -->
            <aside id="aside-main" class="aside-start aside-hide-xs bg-white shadow-sm d-flex flex-column px-2 h-auto">


                <!-- sidebar : logo -->
                <div class="py-1 px-1 mb-1 mt-1">
                    <a href="admindashboard.html">
                        <img src="vista.png" width="160" height="90" alt="VISTA">
                    </a>
                </div>
                <!-- /sidebar : logo -->


                <!-- sidebar : navigation -->
                <div class="aside-wrapper scrollable-vertical scrollable-styled-light align-self-baseline h-100 w-100">

                    <!--

              All parent open navs are closed on click!
              To ignore this feature, add .js-ignore to .nav-deep
    
              Links height (paddings):
                .nav-deep-xs
                .nav-deep-sm
                .nav-deep-md

              .nav-deep-hover     hover background slightly different
              .nav-deep-bordered  bordered links

            -->
                    <nav class="nav-deep nav-deep-sm nav-deep-light">
                        <ul id="dynamicMenu" class="nav flex-column">
                        </ul>
                    </nav>

                </div>
                <!-- /sidebar : navigation -->


                <!-- sidebar : footer -->
                <div class="d-flex align-self-baseline w-100 py-3 px-3 border-top border-light small">

                    <p class="d-inline-grid gap-auto-3 mb-0">
                        <svg class="text-gray-600" width="22px" height="22px" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 512.052 512.052" fill="currentColor">
                            <path
                                d="M208.026,16.026c-114.7,0-208,78.9-208,176c0,39.8,15.7,77.9,44.5,108.9l-39.8,39.8c-4.6,4.6-6,11.5-3.5,17.4c2.5,6,8.3,9.9,14.8,9.9h192c114.7,0,208-78.9,208-176S322.726,16.026,208.026,16.026z">
                            </path>
                            <path opacity="0.5"
                                d="M467.526,428.926c28.8-30.9,44.5-69.1,44.5-108.9c0-49.8-24.6-94.9-64-126.9c-0.9,114.1-108.2,206.9-240,206.9h-89.2c34.5,56.9,104.6,96,185.2,96h192c6.5,0,12.3-3.9,14.8-9.9c2.5-6,1.1-12.9-3.5-17.4L467.526,428.926z">
                            </path>
                            <path fill="#ffffff"
                                d="M304.026,144.026h-192c-8.8,0-16,7.2-16,16s7.2,16,16,16h192c8.8,0,16-7.2,16-16S312.826,144.026,304.026,144.026z">
                            </path>
                            <path fill="#ffffff"
                                d="M240.026,208.026h-128c-8.8,0-16,7.2-16,16s7.2,16,16,16h128c8.8,0,16-7.2,16-16S248.826,208.026,240.026,208.026z">
                            </path>
                        </svg>
                        <a href="#" class="link-normal text-dashed">Need help?</a>
                    </p>

                </div>
                <!-- /sidebar : footer -->


            </aside>
            <!-- /sidebar -->


            <!-- Main -->
            <main id="middle" class="flex-fill mx-auto">
                <div class="container">
                    <header class="d-flex align-items-center justify-content-between">
                        <div>
                            <h1 class="h4">Users</h1>
                            <ol class="breadcrumb small mb-0">
                                <li class="breadcrumb-item text-muted active">Directory</li>
                            </ol>
                        </div>
                        <button id="addUserBtn" class="btn btn-sm btn-primary" style="display:none;">Add user</button>
                    </header>

                    <!-- Add User (card) - hidden by default -->
                    <div class="section p-xl-4 pt-2 add-user-wrap d-none">
                        <div class="card shadow-sm">
                            <div class="card-header d-flex align-items-center justify-content-between">
                                <h6 class="mb-0">Add User</h6>
                            </div>

                            <div class="card-body">
                                <form id="addUserForm" class="row g-3 needs-validation" novalidate>
                                    <div class="col-md-5">
                                        <label for="addUserEmail" class="form-label">Email <span
                                                class="text-danger">*</span></label>
                                        <input id="addUserEmail" type="email" class="form-control"
                                            placeholder="user@school.edu" required />
                                        <div class="invalid-feedback">Please enter a valid email.</div>
                                    </div>

                                    <div class="col-md-4">
                                        <label for="addUserName" class="form-label">Full name</label>
                                        <input id="addUserName" type="text" class="form-control"
                                            placeholder="James Bahadur" />
                                    </div>

                                    <div class="col-md-3">
                                        <label for="addUserRole" class="form-label">Role</label>
                                        <select id="addUserRole" class="form-select">
                                            <option value="operator">Operator</option>
                                            <option value="admin">Admin</option>
                                        </select>
                                    </div>

                                    <!-- Single password field -->
                                    <div class="col-md-5">
                                        <label for="addUserPassword" class="form-label">Set password (min 6)</label>
                                        <div class="input-group">
                                            <input id="addUserPassword" type="password" class="form-control"
                                                minlength="6" required autocomplete="new-password" />
                                            <button class="btn btn-outline-secondary" type="button"
                                                id="togglePw">Show</button>
                                        </div>
                                        <div class="form-text">They can change it later from account settings.</div>
                                    </div>

                                    <div class="col-12 d-flex align-items-center gap-2">
                                        <button type="submit" class="btn btn-primary" id="addUserSubmit">Create
                                            user</button>
                                        <button type="button" class="btn btn-sm btn-light"
                                            id="addUserCancel">Cancel</button>
                                        <span id="addUserStatus" class="small text-muted"></span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Filters -->
                    <div class="section p-xl-4 pb-3">
                        <div class="d-flex flex-wrap align-items-center search-wrap">
                            <input id="searchInput" class="form-control" style="max-width:300px"
                                placeholder="Search by name or email" />
                            <select id="roleFilter" class="form-select" style="max-width:200px">
                                <option value="">All roles</option>
                                <option value="admin">Admin</option>
                                <option value="operator">Operator</option>

                            </select>
                            <span id="countLabel" class="small text-muted ms-auto"></span>
                        </div>
                    </div>

                    <!-- Table -->
                    <div class="section p-xl-4 pt-2">
                        <div class="table-responsive">
                            <table class="table table-sm align-middle">
                                <thead>
                                    <tr>
                                        <th style="width:36px;">#</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Role</th>
                                        <th style="width:130px;">Last Login</th>
                                        <th>Status</th>

                                    </tr>
                                </thead>
                                <tbody id="usersTbody">
                                    <tr>
                                        <td colspan="6" class="text-muted small">Loading...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <div class="small text-muted">Client-side paging</div>
                            <div class="btn-group">
                                <button class="btn btn-sm btn-light" id="prevPage">Prev</button>
                                <button class="btn btn-sm btn-light" id="nextPage">Next</button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <!-- footer -->
    <footer id="footer" class="bg-white shadow">
        <div class="p-3">

            <span class="small fw-medium">&copy; VISTA App</span>

            <div class="d-inline-block float-end dropdown">
                <ul class="list-inline m-0">

                    <!-- LANGUAGE -->
                    <li class="dropdown list-inline-item m-0">

                        <a id="topDDLanguage" href="#" class="d-inline-block" data-bs-toggle="dropdown"
                            aria-expanded="false" aria-haspopup="true">
                            <i class="flag flag-us"></i>
                            <span class="small px-2">English</span>
                        </a>

                        <div aria-labelledby="topDDLanguage"
                            class="dropdown-menu dropdown-menu-clean shadow-lg small m-0 max-vh-50 scrollable-vertical dropdown-menu-right">
                            <a href="#" class="dropdown-item text-primary-hover active">
                                <i class="flag flag-us"></i>
                                English
                            </a>

                        </div>

                    </li>
                    <!-- /LANGUAGE -->

                </ul>
            </div>

        </div>
    </footer>
    <!-- /footer -->

    <!-- Core javascripts -->
    <script src="assets/js/core.min.js"></script>
    <script src="assets/js/vendor_bundle.min.js"></script>


    <!-- modules -->
    <script type="module">
        import "./js/firebase-config.js";
        import "./js/auth.js";
        import "./js/menu.js";
        import "./js/users.js";
        import "./js/profile_setting.js";


    </script>


    <script type="module">
        import { auth } from "./js/firebase-config.js";
        import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
        import { db } from "./js/firebase-config.js";  // your existing config
        import { ref, get } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";


        onAuthStateChanged(auth, (user) => {
            if (!user) {
                window.location.href = "index.html";
            }
        });

        document.getElementById("logout-btn").addEventListener("click", async (e) => {
            e.preventDefault();
            await signOut(auth);
            window.location.href = "index.html";
        });



    </script>
</body>

</html>