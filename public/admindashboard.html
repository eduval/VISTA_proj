<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="UTF-8">
  <title>VISTA</title>
  <meta name="description" content="Faith Media Volunteer Management System">

  <meta name="viewport" content="width=device-width, maximum-scale=5, initial-scale=1">

  <!-- up to 10% speed up for external res -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com/">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/">
  <!-- preloading icon font is helping to speed up a little bit -->
  <link rel="preload" href="assets/fonts/flaticon/Flaticon.woff2" as="font" type="font/woff2" crossorigin>

  <link rel="stylesheet" href="assets/css/core.min.css">
  <link rel="stylesheet" href="assets/css/vendor_bundle.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap">

  <!-- favicon -->
  <link rel="shortcut icon" href="favicon.png">

</head>


<!--

    Layout Admin
      .layout-admin   (required)

      .aside-sticky           - sidebar : fixed and push header
      .header-sticky          - header : always visible on top (acting as old .header-focus)

    ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++

    SCROLL TO TOP BUTTON [optional styling]

      data-s2t-disable="true"
      data-s2t-position="start|end"
      data-s2t-class="btn-secondary btn-sm"   (default)
      data-s2t-class="btn-secondary rounded-circle"
      data-s2t-class="btn-warning rounded-circle"

    ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++

  -->

<body class="layout-admin aside-sticky bg-lime header-sticky"
  data-s2t-class="btn-primary btn-sm bg-gradient-default rounded-circle border-0">

  <div id="wrapper" class="d-flex align-items-stretch flex-column">


    <!--  header -->
    <header id="header" class="d-flex align-items-center shadow-xs">

      <!-- Navbar -->
      <div class="container-fluid position-relative">

        <nav class="navbar navbar-expand-lg navbar-light justify-content-between">

          <!-- logo, navigation toggler -->
          <div class="align-items-start">

            <!-- sidebar toggler -->
            <a href="#aside-main"
              class="btn-sidebar-toggle h-100 d-inline-block d-lg-none justify-content-center align-items-center p-2">
              <span>
                <svg width="25" height="25" viewBox="0 0 20 20">
                  <path d="M 19.9876 1.998 L -0.0108 1.998 L -0.0108 -0.0019 L 19.9876 -0.0019 L 19.9876 1.998 Z">
                  </path>
                  <path d="M 19.9876 7.9979 L -0.0108 7.9979 L -0.0108 5.9979 L 19.9876 5.9979 L 19.9876 7.9979 Z">
                  </path>
                  <path d="M 19.9876 13.9977 L -0.0108 13.9977 L -0.0108 11.9978 L 19.9876 11.9978 L 19.9876 13.9977 Z">
                  </path>
                  <path d="M 19.9876 19.9976 L -0.0108 19.9976 L -0.0108 17.9976 L 19.9876 17.9976 L 19.9876 19.9976 Z">
                  </path>
                </svg>
              </span>
            </a>

            <!-- logo : mobile only -->
            <a class="navbar-brand d-inline-block d-lg-none mx-2" href="admindashboard.html">
              <img src="favicon.png" width="38" height="38" alt="VISTA">
            </a>

          </div>

          <!-- navbar : navigation -->
          <div class="collapse navbar-collapse" id="navbarMainNav">



            <h1 class="h4 mb-0 text-dark px-4" style="font-weight: normal;">
              My Services
              <span class="d-block mt-2 text-muted smaller">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb small">

                    <li class="breadcrumb-item text-muted active" aria-current="page">Manage and monitor volunteer
                      services
                    </li>
                  </ol>
                </nav>
              </span>
            </h1>



            <!-- navbar : mobile menu -->
            <div class="navbar-xs d-none">

              <!-- close button -->
              <button class="navbar-toggler pt-0" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarMainNav" aria-controls="navbarMainNav" aria-expanded="false"
                aria-label="Toggle navigation">
                <svg width="20" viewBox="0 0 20 20">
                  <path
                    d="M 20.7895 0.977 L 19.3752 -0.4364 L 10.081 8.8522 L 0.7869 -0.4364 L -0.6274 0.977 L 8.6668 10.2656 L -0.6274 19.5542 L 0.7869 20.9676 L 10.081 11.679 L 19.3752 20.9676 L 20.7895 19.5542 L 11.4953 10.2656 L 20.7895 0.977 Z">
                  </path>
                </svg>
              </button>

              <!-- logo -->
              <a class="navbar-brand" href="admindashboard.html">
                <img src="vista.png" width="110" height="38" alt="VISTA">
              </a>

            </div>
            <!-- /navbar : mobile menu -->


            <!-- Dropdowns -->


          </div>
          <!-- /navbar : navigation -->

          <!-- options -->
          <ul class="list-inline list-unstyled mb-0 d-flex align-items-end">

            <!-- account -->
            <li class="list-inline-item mx-1 dropdown">

              <!-- has avatar -->
              <a href="#" id="dropdownAccountOptions"
                class="btn btn-sm btn-icon btn-light dropdown-toggle rounded-circle shadow bg-cover" style=""
                data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false" aria-haspopup="true"
                aria-label="Account options"></a>

              <!-- no avatar -->
              <!--
                <a href="#" id="dropdownAccountOptions" class="btn btn-sm btn-icon btn-light dropdown-toggle rounded-circle" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">
                  <span class="small fw-bold">JD</span>
                </a>
                -->

              <div aria-labelledby="dropdownAccountOptions"
                class="dropdown-menu dropdown-menu-clean dropdown-menu-navbar-autopos dropdown-menu-invert dropdown-fadeindown p-0 mt-2 w-300">

                <!-- user detail -->
                <div class="dropdown-header bg-primary bg-gradient rounded rounded-bottom-0 text-white small p-4">
                  <span class="d-block fw-medium text-truncate">Volunteer</span>
                  <span class="d-block smaller fw-medium text-truncate">john.doe@gmail.com</span>
                  <span class="d-block smaller"><b>Last Login:</b> 2019-09-03 01:48</span>
                </div>

                <div class="dropdown-divider mb-3"></div>

                <a href="profile.html" class="dropdown-item text-truncate">
                  <span class="fw-medium">My profile</span>
                  <small class="d-block text-muted smaller">account settings and more</small>
                </a>


                <div class="dropdown-divider mb-0 mt-3"></div>

                <a href="#" id="logout-btn"
                  class="prefix-icon-ignore dropdown-footer dropdown-custom-ignore fw-medium py-3 px-4">
                  <i class="fi fi-power float-start"></i>
                  Log Out
                </a>
              </div>

            </li>



          </ul>
          <!-- /options -->

        </nav>

      </div>
      <!-- /Navbar -->

    </header>
    <!-- /Header -->


    <!-- content -->
    <div id="wrapper_content" class="d-flex flex-fill">


      <!-- sidebar -->
      <aside id="aside-main" class="aside-start aside-hide-xs bg-white shadow-sm d-flex flex-column px-2 h-auto">


        <!-- sidebar : logo -->
        <div class="py-1 px-1 mb-1 mt-1">
          <a href="admindashboard.html">
            <img src="vista.png" width="160" height="90" alt="VISTA">
          </a>
        </div>
        <!-- /sidebar : logo -->


        <!-- sidebar : navigation -->
        <div class="aside-wrapper scrollable-vertical scrollable-styled-light align-self-baseline h-100 w-100">

          <!--

              All parent open navs are closed on click!
              To ignore this feature, add .js-ignore to .nav-deep
    
              Links height (paddings):
                .nav-deep-xs
                .nav-deep-sm
                .nav-deep-md

              .nav-deep-hover     hover background slightly different
              .nav-deep-bordered  bordered links

            -->
          <nav class="nav-deep nav-deep-sm nav-deep-light">
            <ul id="dynamicMenu" class="nav flex-column">
            </ul>
          </nav>

        </div>
        <!-- /sidebar : navigation -->


        <!-- sidebar : footer -->
        <div class="d-flex align-self-baseline w-100 py-3 px-3 border-top border-light small">

          <p class="d-inline-grid gap-auto-3 mb-0">
            <svg class="text-gray-600" width="22px" height="22px" xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512.052 512.052" fill="currentColor">
              <path
                d="M208.026,16.026c-114.7,0-208,78.9-208,176c0,39.8,15.7,77.9,44.5,108.9l-39.8,39.8c-4.6,4.6-6,11.5-3.5,17.4c2.5,6,8.3,9.9,14.8,9.9h192c114.7,0,208-78.9,208-176S322.726,16.026,208.026,16.026z">
              </path>
              <path opacity="0.5"
                d="M467.526,428.926c28.8-30.9,44.5-69.1,44.5-108.9c0-49.8-24.6-94.9-64-126.9c-0.9,114.1-108.2,206.9-240,206.9h-89.2c34.5,56.9,104.6,96,185.2,96h192c6.5,0,12.3-3.9,14.8-9.9c2.5-6,1.1-12.9-3.5-17.4L467.526,428.926z">
              </path>
              <path fill="#ffffff"
                d="M304.026,144.026h-192c-8.8,0-16,7.2-16,16s7.2,16,16,16h192c8.8,0,16-7.2,16-16S312.826,144.026,304.026,144.026z">
              </path>
              <path fill="#ffffff"
                d="M240.026,208.026h-128c-8.8,0-16,7.2-16,16s7.2,16,16,16h128c8.8,0,16-7.2,16-16S248.826,208.026,240.026,208.026z">
              </path>
            </svg>
            <a href="#" class="link-normal text-dashed">Need help?</a>
          </p>

        </div>
        <!-- /sidebar : footer -->


      </aside>
      <!-- /sidebar -->


      <!-- main -->
      <main id="middle" class="flex-fill mx-auto">

        <div class="row g-4 mb-0" id="dashboardstats">

        </div>

        <div class="progress m-2" style="height:2px">
          <div class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0"
            aria-valuemax="100"></div>
        </div>

        <div class="card-header bg-white mb-3">
          <div id="serviceHeader" class="d-flex align-items-center justify-content-left gap-3">
            <!-- Content will be injected here -->
          </div>
        </div>

        <script type="module">
          import { getCurrentUserRole } from './js/auth-helpers.js';


          const headerContainer = document.getElementById('serviceHeader');
          const role = await getCurrentUserRole();

          let headerHTML = `
  <!-- Search Form -->
  <form class="position-relative d-flex align-items-center" style="max-width: 360px; width: 100%;">
    <!-- search icon -->
    <svg class="z-index-1 position-absolute start-0 ms-3 text-primary" width="18px" height="18px"
      xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="11" cy="11" r="8"></circle>
      <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>

    <input type="text" class="form-control form-control-sm border-0 shadow-none ps-5 bg-gray-100"
      placeholder="Search..." />
  </form>
`;

          // Only add New Service button if user is admin
          if (role === 'admin') {
            headerHTML += `
    <a href="newservice.html" class="btn btn-sm btn-primary d-flex align-items-center gap-1">
      <svg width="18px" height="18px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
      <span>New Service</span>
    </a>
  `;
          }

          headerContainer.innerHTML = headerHTML;
        </script>



        <span class="d-block mb-3 text-muted text-truncate fw-small">
          Upcoming Services
        </span>


        <table class="table bg-white mb-5">
          <thead>
            <tr class="bg-light">
              <th>Date & Time</th>
              <th>Volunteers</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="upcomingServices"></tbody>
        </table>

        <span class="d-block mb-5 text-muted text-truncate fw-small">
          Past Services
        </span>

        <table class="table bg-white rounded-3">
          <thead>
            <tr class="card-header bg-light">
              <th>Date & Time</th>
              <th>Volunteers</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="pastServices"></tbody>
        </table>










        <form novalidate="" class="bs-validate" method="get" action="#">







        </form>




      </main>
      <!-- /main -->

    </div>
    <!-- /content -->


    <!-- footer -->
    <footer id="footer" class="bg-white shadow">
      <div class="p-3">

        <span class="small fw-medium">&copy; VISTA App</span>

        <div class="d-inline-block float-end dropdown">
          <ul class="list-inline m-0">

            <!-- LANGUAGE -->
            <li class="dropdown list-inline-item m-0">

              <a id="topDDLanguage" href="#" class="d-inline-block" data-bs-toggle="dropdown" aria-expanded="false"
                aria-haspopup="true">
                <i class="flag flag-us"></i>
                <span class="small px-2">English</span>
              </a>

              <div aria-labelledby="topDDLanguage"
                class="dropdown-menu dropdown-menu-clean shadow-lg small m-0 max-vh-50 scrollable-vertical dropdown-menu-right">
                <a href="#" class="dropdown-item text-primary-hover active">
                  <i class="flag flag-us"></i>
                  English
                </a>

              </div>

            </li>
            <!-- /LANGUAGE -->

          </ul>
        </div>

      </div>
    </footer>
    <!-- /footer -->


  </div><!-- /#wrapper -->



  <!-- Core javascripts -->
  <script src="assets/js/core.min.js"></script>
  <script src="assets/js/vendor_bundle.min.js"></script>


  <!-- modules -->
  <script type="module">
    import "./js/firebase-config.js";
    import "./js/auth.js";
    import "./js/menu.js";
    import "./js/dashboardstats.js";
    import "./js/services.js";
    import "./js/profile_setting.js";

  </script>

  <script type="module">
    import { auth } from "./js/firebase-config.js";
    import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { db } from "./js/firebase-config.js";  // your existing config
    import { ref, get } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";


    onAuthStateChanged(auth, (user) => {
      if (!user) {
        window.location.href = "index.html";
      }
    });

    document.getElementById("logout-btn").addEventListener("click", async (e) => {
      e.preventDefault();
      await signOut(auth);
      window.location.href = "index.html";
    });



  </script>





</body>

</html>